{% extends "base.html"%}
{% block content %}
<nav class="navbar navbar-expand-lg navbar-dark bg-denim">
    <a class="navbar-brand" href="{{url_for('index')}}"><b>Kuebiko Cubing</b></a>
    <a class="nav-item nav-link text-white ml-auto" target="_blank" rel="noopener noreferrer"
       href="https://github.com/tussosedan/kuebiko-cubing">GitHub</a>
</nav>


<div id="content" class="jumbotron text-center">
    <div class="d-flex justify-content-center">
        <form action="{{url_for('index')}}" method="POST" enctype="multipart/form-data">
            <div class="form-group">
                <label for="file" class="h4">Upload a timer backup file for analysis</label>
                <div class="text-muted">Supported timers:
                    <a href="#" data-toggle="tooltip" data-placement="bottom" data-html="true"
                       title="Export/Import > Export ><br/> For backup">TwistyTimer</a>,
                    <a href="#" data-toggle="tooltip" data-placement="bottom" data-html="true"
                       title="Export > Export to file">cstimer</a>
                </div>
                <br/>
                <input type="file" name="file" id="file" class="form-control-file mx-auto" style="width: 220px;">
            </div>
            <button type="submit" class="btn btn-primary" onclick="loading()">
                Submit
            </button>
        </form>
    </div>
</div>
<nav id="loading-navbar" style="display: none;"
     class="navbar navbar-expand-lg navbar-dark bg-primary justify-content-center">
    <ul class="nav">
        <li class="navbar-item text-white"><h4 id="loading-message">Loading...</h4></li>
    </ul>
</nav>
<div id="loading" class="loader">
</div>

<script type="application/javascript">
$(function () {
  $('[data-toggle="tooltip"]').tooltip()
})

function shuffle(array) {
    var i = array.length,
        j = 0,
        temp;

    while (i--) {

        j = Math.floor(Math.random() * (i+1));

        // swap randomly chosen element with current element
        temp = array[i];
        array[i] = array[j];
        array[j] = temp;

    }

    return array;
}

function loading() {
    $('#content').hide();
    $('#loading').show();
    $('#loading-navbar').show();

    var loadingText = [
"Planning LL skip in inspection",
"Learning ZBLL in 5 minutes",
"Practicing for the next episode of Worst Judges",
"Browsing r/cubers instead of practicing",
"Buying every flagship ever released",
"Magnetizing the blindfold",
"Solving FB in 3 moves on average",
"Rotating y2 twice",
"Just one more solve",
"Doing table abuse without a table",
"Is that a 10x10?",
"Peeling off the stickers",
"Doing 7x7 FMC",
"Just using Petrus",
"Deleting all bad solves",
"Using only hand scrambles"
                     ];

    var randText = shuffle(loadingText);
    var i = 0;

    setInterval(function() {
        var newText = randText[i % randText.length] + "...";
        i++;
        $("#loading-message").fadeOut(500, function () {
            $(this).text(newText).fadeIn(500);
        });
        }, 4 * 1000)
}


</script>

{% endblock %}
